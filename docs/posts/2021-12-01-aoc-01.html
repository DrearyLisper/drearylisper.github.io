<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Dreary Blog - Advent Of Code in Haskell, Day 01</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">Dreary Blog</a>
            </div>
            <nav>
                <a href="../">Home</a>
           </nav>
        </header>

        <main role="main">
            <h1>Advent Of Code in Haskell, Day 01</h1>
            <article>
    <section class="header">
        Posted on December  1, 2021
        
    </section>
    <section>
        <p><img style="text-align: center" src="../images/aoc-2021-day-01/aoc-logo.gif" /></p>
<h2 id="day-1-sonar-sweep">Day 1: Sonar Sweep</h2>
<p>Как и в прошлые года <a href="https://twitter.com/ericwastl">Eric Wastl</a> решил побаловать нас своими задачками в виде <a href="https://adventofcode.com/2021">адвент календаря</a>. Данный формат предполагает, что каждый день мы будем открывать новую задачу, приближая себя таким образом к рождеству и рождественским праздникам.</p>
<p><img style="text-align: center" src="../images/aoc-2021-day-01/01.png" /></p>
<p>В этом году сигнал тревоги застал нас врасплох, пока мы спокойно плыли на корабле на рождественские праздники. Кажется кто-то из эльфов поскользнулся и отправил ключи от рождественской упряжки прямо на дно океана! Прежде чем ты осознал что происходит, эльфы уже подготовили субмарину, где ты как-то между делом и оказался. Наша субмарина покрыта рождественской подсветкой (потому что это рождественская субмарина), а также она имеет антенну, способную найти потерянные ключи, но только при условии если мы сможем получить 50 звездочек. Чтобы спасти рождество нам нужно получить эти звездочки до 25-го декабря!</p>
<p>Каждый день AoC содержит задачу, разбитую на две части. За правильное решение каждой части нам дают по одной звездочке.</p>
<p>Спускаясь на субмарине мы видим результат сканирования дна. Результатом сканирования является карта высот.</p>
<p><img style="text-align: center" src="../images/aoc-2021-day-01/02.png" /></p>
<p>Чтобы быть более уверенными в успешности спуска, мы хотим знать как быстро меняется глубина впереди нас. Количество раз когда следующая считанная глубина была больше, чем предыдущая могло быть дать нам полезную информацию об этом.</p>
<p><img style="text-align: center" src="../images/aoc-2021-day-01/03.png" /></p>
<p>Традиционно первый день является неким “Hello world” всего календаря, поэтому нам не составит решить эту проблему. Каждый день я буду писать две функции <code>part1</code> и <code>part2</code>, которые должны решать первую и вторую часть задачи соответственно.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ot">part1 ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Int</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>part1 <span class="ot">=</span> numberOfIncreases <span class="op">.</span> <span class="fu">map</span> <span class="fu">read</span> <span class="op">.</span> <span class="fu">lines</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">where</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="ot">    numberOfIncreases ::</span> [<span class="dt">Int</span>] <span class="ot">-&gt;</span> <span class="dt">Int</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    numberOfIncreases xs <span class="op">|</span> <span class="fu">length</span> xs <span class="op">&lt;</span> <span class="dv">2</span> <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>                         <span class="op">|</span> <span class="fu">head</span> xs <span class="op">&lt;</span> <span class="fu">head</span> (<span class="fu">tail</span> xs) <span class="ot">=</span> <span class="dv">1</span> <span class="op">+</span> numberOfIncreases (<span class="fu">tail</span> xs)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>                         <span class="op">|</span> <span class="fu">otherwise</span> <span class="ot">=</span> numberOfIncreases (<span class="fu">tail</span> xs)</span></code></pre></div>
<p>Функция <code>numberOfIncreases</code> подсчитывает количество увеличений во входном списке. Она разбирает 3 случая:</p>
<ul>
<li><code>length xs &lt; 2</code> – входной массив слишком мал, чтобы сравнить два элемента, поэтому нужно вернуть 0</li>
<li><code>head xs &lt; head (tail xs)</code> – первый элемент меньше чем второй элемент, добавляем 1 к результату и рекурсивно проверяем хвост списка</li>
<li><code>otherwise</code> – пропускаем первый элемент без увеличения результата</li>
</ul>
<p>Функция <code>part1</code> разбивает входной файл на строчки (<code>lines</code>), конвертирует их в числа (<code>read</code>) и передает на вход <code>numberOfIncreases</code>. Рассчитываем результат отправляем и получаем первую звезду за сегодня!</p>
<p><img style="text-align: center" src="../images/aoc-2021-day-01/05.png" /></p>
<p>После решения первой задаче в Advent Of Code открывается вторая, которая обычно основана на первой, на при этом должна быть чуть сложней.</p>
<p>Во второй части теперь нужно рассматривать серию из трех элементов как один элемент и считать разницу между их суммами.</p>
<p><img style="text-align: center" src="../images/aoc-2021-day-01/08.png" /></p>
<p>Мы легко можем адаптировать решение первой задачи для второй. Вместо одного элемента мы будем брать <code>take 3</code> элементов и суммировать их с помощью <code>sum</code>. Вся остальная логика остается похожей.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ot">part2 ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Int</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>part2 <span class="ot">=</span> numberOfIncreases <span class="op">.</span> <span class="fu">map</span> <span class="fu">read</span> <span class="op">.</span><span class="fu">lines</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">where</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="ot">    numberOfIncreases ::</span> [<span class="dt">Int</span>] <span class="ot">-&gt;</span> <span class="dt">Int</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    numberOfIncreases xs <span class="op">|</span> <span class="fu">length</span> xs <span class="op">&lt;</span> <span class="dv">4</span> <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                         <span class="op">|</span> <span class="fu">sum</span> (<span class="fu">take</span> <span class="dv">3</span> xs) <span class="op">&lt;</span> <span class="fu">sum</span> (<span class="fu">take</span> <span class="dv">3</span> <span class="op">$</span> <span class="fu">tail</span> xs) <span class="ot">=</span> <span class="dv">1</span> <span class="op">+</span> numberOfIncreases (<span class="fu">tail</span> xs)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                         <span class="op">|</span> <span class="fu">otherwise</span> <span class="ot">=</span> numberOfIncreases (<span class="fu">tail</span> xs)</span></code></pre></div>
<p>Отправляем на проверку и получаем заслуженную вторую звезду.</p>
<p><img style="text-align: center" src="../images/aoc-2021-day-01/07.png" /></p>
<p>Полный код решения это задачи можно найти у меня в <a href="https://github.com/DrearyLisper/aoc-2021">GitHub</a>, а теперь время отпраздновать победу над первой задачей (не самой сложной, но все же).</p>
    </section>
</article>

        </main>

        <footer>
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </footer>
    </body>
</html>
